<!DOCTYPE html>
<html lang="en">
<head> 
    <script src="/scripts/logo2.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/index60.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <title>Nand Studios - Supermarket Simulator</title>
    <!-- Firebase JavaScript SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <script type="module">
        // Initialisierung der Firebase-Module
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
        import { getFirestore, collection, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";
    
        // Konfiguration für Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDBTMH5SzACrkyiXjJKmn646FpZ52te-BE",
            authDomain: "nand-studios.firebaseapp.com",
            projectId: "nand-studios",
            storageBucket: "nand-studios.appspot.com",
            messagingSenderId: "757182836081",
            appId: "1:757182836081:web:fcbd06ff53d632bbf7dad0",
            measurementId: "G-NW0JM7YR07"
        };
    
        // Initialisierung von Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        // Variablen für die Links
        let CapyRunMobileDownloadLinkV = '';
        let CamelSimulatorDownloadLinkV = '';
        let BananaClickerDownloadLinkV = '';
        let FallRunDownloadLinkV = '';
        let SupermarketSimulatorDownloadLinkV = '';
        let WebsiteVersionV = '';
        let CamelSimulatorVersionV = '';
        let BananaClickerVersionV = '';
        let CapyRunVersionV = '';
        let SupermarketSimulatorVersionV = '';
    
        // Abrufen der Links aus der Firestore-Datenbank
        const downloadDocRef = doc(db, 'links', 'linkdoc');
        const versionDocRef = doc(db, 'links', 'versiondoc');

    const downloadButtons = [
    { selector: '.CapyRunMobileDownloadButton', variable: 'CapyRunMobileDownloadLinkV' },
    { selector: '.CamelSimulatorDownloadButton', variable: 'CamelSimulatorDownloadLinkV' },
    { selector: '.BananaClickerDownloadButton', variable: 'BananaClickerDownloadLinkV' },
    { selector: '.FallRunDownloadButton', variable: 'FallRunDownloadLinkV' },
    { selector: '.SupermarketSimulatorDownloadButton', variable: 'SupermarketSimulatorDownloadLinkV' }
];

const versionTexts = [
    { selector: '.WebsiteVersionText', variable: 'WebsiteVersionV' },
    { selector: '.CapyRunVersionText', variable: 'CapyRunVersionV' },
    { selector: '.CamelSimulatorVersionText', variable: 'CamelSimulatorVersionV' },
    { selector: '.BananaClickerVersionText', variable: 'BananaClickerVersionV' },
    { selector: '.SupermarketSimulatorVersionText', variable: 'SupermarketSimulatorVersionV' }
];

function updateLinkAndLog(docSnapshot, dataVariable, buttonsArray) {
    if (docSnapshot.exists()) {
        const data = docSnapshot.data();
        window[dataVariable] = data[dataVariable];
        console.log(`Firebase-Link ${dataVariable}:`, window[dataVariable]);
        buttonsArray.forEach(button => {
            document.querySelectorAll(button.selector).forEach(btn => {
                btn.href = window[dataVariable];
            });
        });
    }
}

function updateVersionTextAndLog(docSnapshot, dataVariable, textsArray) {
    if (docSnapshot.exists()) {
        const data = docSnapshot.data();
        window[dataVariable] = data[dataVariable];
        console.log(`Firebase-Link ${dataVariable}:`, window[dataVariable]);
        textsArray.forEach(text => {
            document.querySelectorAll(text.selector).forEach(txt => {
                txt.textContent = window[dataVariable];
            });
        });
    }
}
    getDoc(downloadDocRef).then(docSnapshot => {
    updateLinkAndLog(docSnapshot, 'CapyRunMobileDownload', downloadButtons.slice(0, 1));
    updateLinkAndLog(docSnapshot, 'CamelSimulatorDownload', downloadButtons.slice(1, 2));
    updateLinkAndLog(docSnapshot, 'BananaClickerDownload', downloadButtons.slice(2, 3));
    updateLinkAndLog(docSnapshot, 'FallRunDownload', downloadButtons.slice(3, 4));
    updateLinkAndLog(docSnapshot, 'SupermarketSimulatorDownload', downloadButtons.slice(4, 5));
});

getDoc(versionDocRef).then(docSnapshot => {
    updateVersionTextAndLog(docSnapshot, 'WebsiteVersion', versionTexts.slice(0, 1));
    updateVersionTextAndLog(docSnapshot, 'CapyRunVersion', versionTexts.slice(1, 2));
    updateVersionTextAndLog(docSnapshot, 'CamelSimulatorVersion', versionTexts.slice(2, 3));
    updateVersionTextAndLog(docSnapshot, 'BananaClickerVersion', versionTexts.slice(3, 4));
    updateVersionTextAndLog(docSnapshot, 'SupermarketSimulatorVersion', versionTexts.slice(4, 5));
});
</script>

<style>
    body {
        background-color: #B4C0AD;
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
    } 

    .image {
        position: absolute;
        width: 99px;
        height: 99px;
        background-size: cover;
        background-repeat: no-repeat;
        animation: flying 10s linear infinite;
    }

    @keyframes flying {
    0% {
        transform: translateY(100vh) rotate(0deg);
    }
    100% {
        transform: translateY(-100vh) rotate(360deg);
    }
    }

    #score {
        font-family: 'Line';
    }

</style>

</head>

<body>
    <div class="container">
        <nav class="navbar">
            <ul class="nav-links">
                <a href="https://nand-studios.com/index" id="reload">NAND STUDIOS</a>
                    <hr class="custom-line-vertical">
                
                <li class="nav-link services">
                    <a >CAMELSIMULATOR
                        <span class="material-icons dropdown-icon">
                            arrow_drop_down
                        </span>
                    </a>
                    
                    <ul class="drop-down">
                        <iframe frameborder="0" src="/media/CamelIcon.png" width="155" height="155"></iframe>
                        <a href="https://nand-studios.com/camelsimulator" id="itch">> VIEW</a>
                    </ul>
                </li>
                <li class="nav-link services">
                    <a >CAPYRUN 
                        <span class="material-icons dropdown-icon">
                            arrow_drop_down
                        </span>
                    </a>
                    
                    <ul class="drop-down">
                        <iframe frameborder="0" src="/media/CapyRunIcon.png" width="155" height="155"></iframe>
                        <a href="https://nand-studios.com/capyrun" id="itch">> VIEW</a>  
                    </ul>
                </li>
                <li class="nav-link services">
                    <a >BANANACLICKER
                        <span class="material-icons dropdown-icon">
                            arrow_drop_down
                        </span>
                    </a>
                    
                    <ul class="drop-down">
                        <iframe frameborder="0" src="/media/BananaClickerIcon.png" width="155" height="155"></iframe>
                        <a href="https://nand-studios.com/bananaclicker" id="itch">> VIEW</a>
                        
                    </ul>
                </li>
                <li class="nav-link services">
                    <a >SUPERMARKET SIMULATOR
                        <span class="material-icons dropdown-icon">
                            arrow_drop_down
                        </span>
                    </a>
                    
                    <ul class="drop-down">
                        <iframe frameborder="0" src="/media/SupermarketSimulatorIcon.png" width="155" height="155"></iframe>
                        <a href="https://nand-studios.com/supermarketsimulator" id="itch">> VIEW</a>
                        
                    </ul>
                </li>
                <li id="menu" class="nav-link services">
                    <a >MENU
                        <span class="material-icons dropdown-icon">
                            arrow_drop_down
                        </span>
                    </a>
                    
                    <ul class="drop-down">
                        <a href="https://nand-studios.com/camelsimulator" id="itch">CAMELSIMULATOR</a>
                        <hr class="custom-line">
                        <a href="https://nand-studios.com/capyrun" id="itch">CAPYRUN</a>
                        <hr class="custom-line">
                        <a href="https://nand-studios.com/bananaclicker" id="itch">BANANACLICKER</a>
                    </ul>
                </li>
            </ul>
        </nav>

        <div id="bottonhead">
            <a class="GameName" target="_blank">Supermarket Simulator</a>
            <a id="text" ></a>
            <iframe frameborder="0" class="icon" src="/media/windows.svg" width="18" height="18"></iframe>
            <a class="SupermarketSimulatorDownloadButton" target="_blank">DOWNLOAD</a>
            <a id="text" ></a>
            <a href="https://nandstudios.itch.io/SupermarketSimulator" target="_blank">ITCH-PAGE</a>
            <a id="text" ></a>
            <a id="info-text" class="SupermarketSimulatorVersionText"></a>
            

         </div>
         <div id="imagetext">
            <a>DOWNLOAD NOW</a>
         </div>
         
    </div>

    <div id="logo-container">
        <div id="logo">
            <div id="score">Supermarket</div>
    </div>

    <div class="footer">
        <div>
            <hr class="custom-line">
        </div>
        <div>
            <a href="mailto:help@nand-studios.com" id="email-button-footer" target="_blank">EMAIL</a>
            <a href="https://discord.gg/QeBecQ2sbg" id="email-button-footer" target="_blank">DISCORD</a>
            <a href="https://github.com/NANDStudiosoooooooooooooooooooooo/email" id="email-button-footer" target="_blank">NANDMAIL</a>
        </div>
        <div>
            <hr class="custom-line">
        </div>
        <div>
            <a id="version-text" class="">© NAND STUDIOS 2024</a>
            <a id="version-text" class="WebsiteVersionText">VERSION:</a>
        </div>
    </div>

</body>
<script src="scripts/flying.js"></script>
</html>
